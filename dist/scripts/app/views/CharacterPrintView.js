define(["jquery","backbone","text!../templates/character-print-view.html","../helpers/VampirePrintHelper","marionette","text!../templates/character-print-parent.html","text!../templates/print/blood.html","text!../templates/print/morality.html","text!../templates/print/willpower.html","text!../templates/print/health-levels.html","text!../templates/print/skills.html","text!../templates/print/section.html","text!../templates/print/gnosis.html","text!../templates/print/total.html","text!../templates/print/fixed-blood.html"],function(e,t,i,a,l,s,o,r,n,m,p,d,c,h,u){var f=l.ItemView.extend({template:_.template('<h1 class="ui-bar ui-bar-a"><%= format_simpletext("name") %></h1>'),templateHelpers:function(){var e=this;return{format_simpletext:e.format_simpletext}},initialize:function(){_.bindAll(this,"format_simpletext","format_attribute_value","format_attribute_focus","format_skill","format_specializations")}});_.extend(f.prototype,a);var w=l.ItemView.extend({className:"ui-grid-b ui-responsive",template:function(e){var t=this,i=_.map(t.fields,function(t,i){if(e[t.name])return'<div class="ui-block-'+String.fromCharCode(97+i)+'">                                <h2 class="ui-bar ui-bar-a">'+t.display+': <%= format_simpletext("'+t.name+'") %></h2>                            </div>'});return i=_.without(i,void 0),(i=_.template(i.join("")))(e)},templateHelpers:function(){var e=this;return{format_simpletext:e.format_simpletext}},initialize:function(e){var t=this;this.fields=e.fields,_.each(this.fields,function(e){t.listenTo(t.model,"change:"+e.name,t.render)}),_.bindAll(this,"render","template","format_simpletext","format_attribute_value","format_attribute_focus","format_skill","format_specializations")}});_.extend(w.prototype,a);var b=l.ItemView.extend({template:function(e){var t=this,i=_.map(["Physical","Social","Mental"],function(e,i){var a=['<div class="ui-block-'+String.fromCharCode(97+i)+'">'];a.push('<h4 class="ui-bar ui-bar-a ui-corner-all">'+e+"</h4>"),a.push('<div class="ui-body">');var l=_.find(t.model.get("attributes"),"attributes.name",e);return l&&a.push(t.format_attribute_value(l)),a.push("<br/>"),a.push(t.format_attribute_focus(e)),a.push("</div></div>"),a.join("")});return i=_.without(i,void 0),(i=_.template(i.join("")))(e)},templateHelpers:function(){var e=this;return{format_simpletext:e.format_simpletext,format_attribute_value:e.format_attribute_value,format_attribute_focus:e.format_attribute_focus}},initialize:function(e){var t=this;this.$el.addClass("ui-grid-b"),this.$el.addClass("ui-responsive"),_.each(this.fields,function(e){t.listenTo(t.model,"change:"+e,t.render)}),_.bindAll(this,"render","template","format_simpletext","format_attribute_value","format_attribute_focus","format_skill","format_specializations")}});_.extend(b.prototype,a);var v=l.ItemView.extend({template:_.template(o),templateHelpers:function(){var e=this;return{character:e.model}},initialize:function(e){var t=this;t.listenTo(t.model,"change:backgrounds",t.render),_.bindAll(this,"render","template","format_simpletext","format_attribute_value","format_attribute_focus","format_skill","format_specializations")},onRender:function(){this.$el=this.$el.children(),this.$el.unwrap(),this.setElement(this.$el)}});_.extend(v.prototype,a);var y=l.ItemView.extend({template:_.template(u),templateHelpers:function(){var e=this;return{character:e.model}},initialize:function(e){_.bindAll(this,"render","template","format_simpletext","format_attribute_value","format_attribute_focus","format_skill","format_specializations")},onRender:function(){this.$el=this.$el.children(),this.$el.unwrap(),this.setElement(this.$el)}});_.extend(y.prototype,a);var x=l.ItemView.extend({template:_.template(n),templateHelpers:function(){var e=this;return{character:e.model}},initialize:function(e){var t=this;t.listenTo(t.model,"change:willpower_sources",t.render),_.bindAll(this,"render","template","format_simpletext","format_attribute_value","format_attribute_focus","format_skill","format_specializations")}});_.extend(x.prototype,a);var V=l.ItemView.extend({template:_.template(c),templateHelpers:function(){var e=this;return{character:e.model}},initialize:function(e){var t=this;t.listenTo(t.model,"change:gnosis_sources",t.render),_.bindAll(this,"render","template","format_simpletext","format_attribute_value","format_attribute_focus","format_skill","format_specializations")}});_.extend(V.prototype,a);var C=l.ItemView.extend({template:_.template(r),templateHelpers:function(){var e=this;return{character:e.model}},initialize:function(e){var t=this;t.listenTo(t.model,"change:paths",t.render),_.bindAll(this,"render","template","format_simpletext","format_attribute_value","format_attribute_focus","format_skill","format_specializations")}});_.extend(C.prototype,a);var g=l.ItemView.extend({template:_.template(m),templateHelpers:function(){var e=this;return{character:e.model}},initialize:function(e){var t=this;this.column=e.column,t.listenTo(t.model,"change:health_levels",t.render),_.bindAll(this,"render","template","format_simpletext","format_attribute_value","format_attribute_focus","format_skill","format_specializations")},onRender:function(){this.$el=this.$el.children(),this.$el.unwrap(),this.setElement(this.$el)}});_.extend(g.prototype,a);var z=l.ItemView.extend({template:_.template(h),templateHelpers:function(){var e=this;return{character:e.model}},initialize:function(e){_.bindAll(this,"render","template","format_simpletext","format_attribute_value","format_attribute_focus","format_skill","format_specializations")},onRender:function(){this.$el=this.$el.children(),this.$el.unwrap(),this.setElement(this.$el)}});_.extend(z.prototype,a);var k=l.ItemView.extend({template:_.template(p),templateHelpers:function(){var e=this,t=e.model.get_sorted_skills();return{character:e.model,skills:t,groupedSkills:e.model.get_grouped_skills(t,3),format_skill:e.format_skill}},initialize:function(e){var t=this;t.listenTo(t.model,"change:skills",t.render),t.base_abilities=[],t.base_abilities.push(["Academics","Animal Ken","Athletics","Awareness","Brawl","Computer","Crafts","Dodge","Drive"]),t.base_abilities.push(["Empathy","Firearms","Intimidation","Investigation","Leadership","Linguistics","Lore","Medicine","Melee","Occult"]),t.base_abilities.push(["Performance","Science","Security","Stealth","Streetwise","Subterfuge","Survival"]),t.base_abilities=_.flatten(t.base_abilities),_.bindAll(this,"render","template","format_simpletext","format_attribute_value","format_attribute_focus","format_skill","format_specializations")}});_.extend(k.prototype,a);var A=l.ItemView.extend({template:_.template(d),templateHelpers:function(){var e=this;return _.each(e.sections,function(t){var i=t.sort||"name",a=t.direction||"asc",l=e.model.get(t.name);"name"==i?l=_.sortByAll(l,["attributes.name"]):"value"==i&&(l=_.sortByAll(l,["attributes.value","attributes.name"])),"desc"==a&&(l=_(l).reverse().value()),t.values=l}),{character:e.model,sections:e.sections,format_skill:e.format_skill}},initialize:function(e){var t=this;this.column=e.column,this.sections=e.sections,_.each(t.sections,function(e){t.listenTo(t.model,"change:"+e.name,t.render)}),_.bindAll(this,"render","template","format_simpletext","format_attribute_value","format_attribute_focus","format_skill","format_specializations")},onRender:function(){this.$el=this.$el.children(),this.$el.unwrap(),this.setElement(this.$el)}});_.extend(A.prototype,a);var $=l.LayoutView.extend({template:_.template(s),regions:{header:"#cpp-header",firstbar:"#cpp-firstbar",secondbar:"#cpp-secondbar",attributes:"#cpp-attributes",blood:"#cpp-blood",morality:"#cpp-morality",willpower:"#cpp-willpower",health_levels:"#cpp-health-levels",total_a:"#cpp-total-a",total_b:"#cpp-total-b",total_c:"#cpp-total-c",skills:"#cpp-skills",bottom_one_a:"#cpp-bottom-one-a",bottom_one_b:"#cpp-bottom-one-b",bottom_one_c:"#cpp-bottom-one-c",bottom_two_a:"#cpp-bottom-two-a",bottom_two_b:"#cpp-bottom-two-b",bottom_two_c:"#cpp-bottom-two-c"},setup:function(e){var i=this,a=i.options||{};if(!i.lasttribe||i.character.get("wta_tribe")!=i.lasttribe||e!=i.character)return i.lasttribe=e.get("wta_tribe"),i.character=e,i.render(),"Werewolf"==i.character.get("type")?(i.showChildView("header",new f({model:e}),a),i.showChildView("firstbar",new w({model:e,fields:[{name:"wta_tribe",display:"Tribe"},{name:"wta_breed",display:"Breed"},{name:"wta_auspice",display:"Auspice"}]}),a),i.showChildView("secondbar",new w({model:e,fields:[{name:"archetype",display:"Archetype"},{name:"wta_camp",display:"Camp"},{name:"wta_faction",display:"Faction"}]}),a),i.showChildView("attributes",new b({model:e}),a),"Ananasi"==i.character.get("wta_tribe")?i.showChildView("blood",new y({model:new t.Model({generation:0,total:15,split:5,linebreak:10,blood_per_turn:3})}),a):i.showChildView("blood",new V({model:e,column:1}),a),i.showChildView("willpower",new x({model:e}),a),i.showChildView("health_levels",new g({model:e}),a),"Ananasi"!=i.character.get("wta_tribe")&&i.showChildView("morality",new z({model:new t.Model({name:"Rage",total:10,split:7})}),a),i.showChildView("total_a",new z({model:new t.Model({name:"Harano",total:5,split:5})}),a),i.showChildView("total_b",new z({model:new t.Model({name:"Wyrm Taint",total:5,split:5})}),a),i.showChildView("total_c",new z({model:new t.Model({name:"Seethe Traits",total:10,split:5})}),a),i.showChildView("skills",new k({model:e}),a),i.showChildView("bottom_one_a",new A({model:e,sections:[{display:"Backgrounds",name:"wta_backgrounds",format:1},{display:"Haven",name:"haven_specializations",format:1},{display:"Influences: The Elite",name:"influence_elite_specializations",format:1},{display:"Influences: The Underworld",name:"influence_underworld_specializations",format:1},{display:"Contacts",name:"contacts_specializations",format:1},{display:"Allies",name:"allies_specializations",format:1},{display:"Rites",name:"wta_rites",format:1}]}),a),i.showChildView("bottom_one_b",new A({model:e,sections:[{display:"Gifts",name:"wta_gifts",format:1,sort:"value",direction:"asc"}]}),a),i.showChildView("bottom_one_c",new A({model:e,sections:[{display:"Merits",name:"wta_merits",format:4},{display:"Flaws",name:"wta_flaws",format:4},{display:"Monikers",name:"monikers",format:4}]}),a),i.showChildView("bottom_two_a",new A({model:e,sections:[{display:"Lores",name:"lore_specializations",format:0},{display:"Academics",name:"academics_specializations",format:0},{display:"Totem Bonuses",name:"wta_totem_bonus_traits",format:0}]}),a),i.showChildView("bottom_two_b",new A({model:e,sections:[{display:"Rituals",name:"rituals",format:0}]}),a),i.showChildView("bottom_two_c",new A({model:e,sections:[{display:"Languages",name:"linguistics_specializations",format:0},{display:"Drive",name:"drive_specializations",format:0}]}),a)):(i.showChildView("header",new f({model:e}),a),i.showChildView("firstbar",new w({model:e,fields:[{name:"clan",display:"Clan"},{name:"archetype",display:"Archetype"},{name:"antecedence",display:"Antecedence"}]}),a),i.showChildView("secondbar",new w({model:e,fields:[{name:"sect",display:"Sect"},{name:"faction",display:"Faction"},{name:"title",display:"Title"}]}),a),i.showChildView("attributes",new b({model:e}),a),i.showChildView("blood",new v({model:e}),a),i.showChildView("morality",new C({model:e}),a),i.showChildView("willpower",new x({model:e}),a),i.showChildView("health_levels",new g({model:e}),a),i.showChildView("skills",new k({model:e}),a),i.showChildView("bottom_one_a",new A({model:e,sections:[{display:"Backgrounds",name:"backgrounds",format:1},{display:"Haven",name:"haven_specializations",format:1},{display:"Influences: The Elite",name:"influence_elite_specializations",format:1},{display:"Influences: The Underworld",name:"influence_underworld_specializations",format:1},{display:"Contacts",name:"contacts_specializations",format:1},{display:"Sabbat Rituals",name:"sabbat_rituals",format:1},{display:"Allies",name:"allies_specializations",format:1}]}),a),i.showChildView("bottom_one_b",new A({model:e,sections:[{display:"Disciplines",name:"disciplines",format:1},{display:"Techniques",name:"techniques",format:0},{display:"Elder Disciplines",name:"elder_disciplines",format:0}]}),a),i.showChildView("bottom_one_c",new A({model:e,sections:[{display:"Merits",name:"merits",format:4},{display:"Flaws",name:"flaws",format:4},{display:"Status",name:"status_traits",format:4}]}),a),i.showChildView("bottom_two_a",new A({model:e,sections:[{display:"Lores",name:"lore_specializations",format:0},{display:"Academics",name:"academics_specializations",format:0}]}),a),i.showChildView("bottom_two_b",new A({model:e,sections:[{display:"Rituals",name:"rituals",format:0}]}),a),i.showChildView("bottom_two_c",new A({model:e,sections:[{display:"Languages",name:"linguistics_specializations",format:0},{display:"Drive",name:"drive_specializations",format:0},{display:"Texts",name:"vampiric_texts",format:0}]}),a)),i}});return $});